<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BRITS ACADEMY - Learning Platform</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="index.css">
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script>
        (function() {
            emailjs.init("uO6yLWKAtkCxMCgUM");
        })();
    </script>
</head>
<body>
    <!-- Logo Banner Section -->
    
    <!-- Floating Chatbot Launcher -->
    <div class="academy-chat-launcher" id="academyChatLauncher">
        <i class="fas fa-comments"></i>
    </div>

    <!-- Chatbot Container -->
    <div class="academy-chat-container" id="academyChatContainer">
        <div class="academy-chat-header">
            <h3><i class="fas fa-graduation-cap"></i> Brits Academy Assistant</h3>
            <button class="academy-chat-close" id="academyChatClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="academy-chat-messages" id="academyChatMessages">
            <!-- Messages will appear here -->
        </div>
        <div class="academy-chat-input-container">
            <input type="text" class="academy-chat-input" id="academyChatQuery" placeholder="Ask about courses, enrollment, payments...">
            <button class="academy-chat-send-btn" id="academyChatSendBtn">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>
        
    </section>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <a href="#" class="logo" onclick="showHome()">
                <i class="fas fa-laptop-code"></i>
                <span>BRITS ACADEMY</span>
            </a>
            <nav>
                <ul id="nav-menu">
                    <li><a href="#" class="active" onclick="showHome()">HOME</a></li>
                    <li><a href="#" onclick="showAbout()">ABOUT</a></li>
                    <li><a href="#" onclick="showCourses()">COURSES</a></li>
                    <li><a href="/adminfinal.html">ADMIN</a></li>
                </ul>
                <button class="mobile-menu-btn" id="mobile-menu-btn">
                    <i class="fas fa-bars"></i>
                </button>
            </nav>
        </div>
    </header>

    <!-- Main Content Sections -->
    <main id="main-content">
        <!-- Home/Hero Section -->
        <section id="home" class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1>Master Technical Skills for the Digital Age</h1>
                    <p>Join our community of learners and professionals to master in-demand technical skills. From coding to cybersecurity, we provide comprehensive resources to boost your career.</p>
                    <div class="hero-btns">
                        <a href="email.html" class="btn btn-primary" >Get Started</a>
                        <a href="#" class="btn btn-secondary" onclick="showCourses()">Explore Courses</a>
                    </div>
                </div>
                <div class="hero-image">
                    <!-- Futuristic Animated Hero Image Section -->
                    <div class="futuristic-hero-visual" style="position: relative; width: 320px; height: 320px; margin: 0 auto;">
                    <div class="futuristic-hero-visual" style="position: relative; width: 320px; height: 320px; margin: 0 auto;">
                        <!-- Animated SVG Glow Rings -->
                        <svg width="320" height="320" viewBox="0 0 320 320" style="position: absolute; top: 0;  left: 0; z-index: 1;">
                            <defs>
                                <radialGradient id="glow1" cx="50%" cy="50%" r="50%">
                                    <stop offset="0%" stop-color="#38bdf8" stop-opacity="0.7"/>
                                    <stop offset="100%" stop-color="#0ea5e9" stop-opacity="0"/>
                                </radialGradient>
                                <radialGradient id="glow2" cx="50%" cy="50%" r="50%">
                                    <stop offset="0%" stop-color="#f59e0b" stop-opacity="0.5"/>
                                    <stop offset="100%" stop-color="#f59e0b" stop-opacity="0"/>
                                </radialGradient>
                            </defs>
                            <circle cx="160" cy="160" r="120" fill="url(#glow1)">
                                <animate attributeName="r" values="120;135;120" dur="3s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="0.7;0.3;0.7" dur="3s" repeatCount="indefinite"/>
                            </circle>
                            <circle cx="160" cy="160" r="80" fill="url(#glow2)">
                                <animate attributeName="r" values="80;95;80" dur="2.5s" repeatCount="indefinite"/>
                                <animate attributeName="opacity" values="0.5;0.2;0.5" dur="2.5s" repeatCount="indefinite"/>
                            </circle>
                            <!-- Animated Dots -->
                            <circle cx="60" cy="80" r="6" fill="#38bdf8">
                                <animate attributeName="cy" values="80;120;80" dur="2.2s" repeatCount="indefinite"/>
                            </circle>
                            <circle cx="260" cy="220" r="4" fill="#f59e0b">
                                <animate attributeName="cx" values="260;220;260" dur="2.8s" repeatCount="indefinite"/>
                            </circle>
                            <circle cx="100" cy="250" r="5" fill="#10b981">
                                <animate attributeName="r" values="5;10;5" dur="2s" repeatCount="indefinite"/>
                            </circle>
                        </svg>
                        <!-- Logo Image with Neon Glow -->
                        <img src="ChatGPT Image Jun 6, 2025, 07_12_25 PM.png" alt="BRITS ACADEMY Logo"
                            style="position: relative; z-index: 2; max-width: 220px; width: 100%; margin: 50px auto 45px auto; border-radius: 18px; box-shadow: 0 0 40px 8px #38bdf888, 0 0 80px 0 #f59e0b44;">
                        <!-- Animated Floating Shapes -->
                        <div style="position: absolute; left: 30px; top: 30px; z-index: 3;">
                            <svg width="32" height="32">
                                <rect x="0" y="0" width="32" height="32" rx="8" fill="#0ea5e9" opacity="0.7">
                                    <animateTransform attributeName="transform" type="rotate" from="0 16 16" to="360 16 16" dur="6s" repeatCount="indefinite"/>
                                </rect>
                            </svg>
                        </div>
                        <div style="position: absolute; right: 30px; bottom: 30px; z-index: 3;">
                            <svg width="24" height="24">
                                <circle cx="12" cy="12" r="12" fill="#f59e0b" opacity="0.5">
                                    <animateTransform attributeName="transform" type="scale" values="1;1.2;1" dur="3s" repeatCount="indefinite"/>
                                </circle>
                            </svg>
                        </div>
                        <div style="position: absolute; left: 60px; bottom: 60px; z-index: 3;">
                            <svg width="18" height="18">
                                <!-- <polygon points="9,0 18,18 0,18" fill="#10b981" opacity="0.6">
                                    <animateTransform attributeName="transform" type="translate" values="0 0; 0 -10; 0 0" dur="2.5s" repeatCount="indefinite"/>
                                </polygon> -->
                            </svg>
                        </div>
                    </div>
                    <style>
                        .futuristic-hero-visual {
                            animation: floatY 6s ease-in-out infinite;
                            filter: drop-shadow(0 8px 32px #38bdf8aa);
                        }
                        @keyframes floatY {
                            0%, 100% { transform: translateY(0);}
                            50% { transform: translateY(-18px);}
                        }
                    </style>
                     <section class="logo-banner" style="background: #0f172a00; padding: 60px 0 30px 0; text-align: center;">      
                </div>
            </div>
        </section>
        

        <!-- About Section -->
        <section id="about" class="about" style="display:none;">
            <div class="container">
                <div class="section-title">
                    <h2>About Us</h2>
                </div>
                <div class="about-content">
                    <div class="about-text">
                        <h3>Empowering the Next Generation of Tech Professionals</h3>
                        <p>BRITS ACADEMY was founded in 2020 with a mission to make technical education accessible to everyone. We believe that in today's digital world, technical literacy is not just an advantageâ€”it's a necessity.</p>
                        <p>Our team of industry experts and educators have curated the most relevant and up-to-date content to help you stay ahead in your career. Whether you're a beginner or looking to advance your skills, we have resources tailored for you.</p>
                        
                        <div class="about-stats">
                            <div class="stat-box">
                                <i class="fas fa-users"></i>
                                <h4>25,000+</h4>
                                <p>Active Learners</p>
                            </div>
                            <div class="stat-box">
                                <i class="fas fa-book-open"></i>
                                <h4>120+</h4>
                                <p>Courses</p>
                            </div>
                            <div class="stat-box">
                                <i class="fas fa-chalkboard-teacher"></i>
                                <h4>50+</h4>
                                <p>Expert Instructors</p>
                            </div>
                            <div class="stat-box">
                                <i class="fas fa-graduation-cap"></i>
                                <h4>95%</h4>
                                <p>Completion Rate</p>
                            </div>
                        </div>
                    </div>
                    <div class="about-image">
                        <img src="VR.jpg" alt="">
                        </svg>
                    </div>
                </div>
            </div>
        </section>

        <!-- Courses Section -->
        <section id="courses" class="content" style="display:none;">
            <div class="container">
                <div class="section-title">
                    <h2>Our Courses</h2>
                </div>
                <div class="courses-grid" id="courses-container">
                    <!-- Course cards will be populated by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Course Detail Section -->
        <section id="course-detail" class="course-detail">
            <div class="container">
                <div class="course-hero">
                    <div class="course-info">
                        <h1 id="course-detail-title">WEB DEVELOPMENT Fundamentals</h1>
                        <p id="course-detail-desc">Learn HTML, CSS, and JavaScript to build modern, responsive websites from scratch. This comprehensive course covers everything from basic web structure to advanced interactivity.</p>
                        
                        <div class="course-stats">
                            <div class="stat-item">
                                <h3>8 weeks</h3>
                                <p>Duration</p>
                            </div>
                            <div class="stat-item">
                                <h3>$1,200+</h3>
                                <p>Average Salary</p>
                            </div>
                            <div class="stat-item">
                                <h3>96%</h3>
                                <p>Completion Rate</p>
                            </div>
                        </div>
                        
                        <div class="hero-btns">
                            <a href="email.html" class="btn btn-primary">Enroll Now</a>
                            <a href="#" class="btn btn-secondary" onclick="showCourses()">Back to Courses</a>
                        </div>
                    </div>
                
                    <div class="course-image-large">
                        <img src="blue.jpg" alt="">
                        <!-- <svg viewBox="0 0 500 400" xmlns="https://images.app.goo.gl/W2ofkdd4MVxLBhMMA">
                            <rect x="50" y="50" width="400" height="300" rx="20" fill="#1E293B"/>
                            <rect x="70" y="70" width="360" height="260" rx="10" fill="#0F172A"/>
                            <rect x="90" y="90" width="320" height="40" rx="5" fill="#334155"/>
                            <rect x="90" y="140" width="140" height="180" rx="5" fill="#2563EB"/>
                            <rect x="240" y="140" width="170" height="80" rx="5" fill="#F59E0B"/>
                            <rect x="240" y="230" width="170" height="90" rx="5" fill="#10B981"/>
                        </svg> -->
                    </div>
                </div>
                
                <div class="course-modules">
                    <h2 style="margin-bottom: 20px; color: var(--accent);">Course Modules</h2>
                    
                    <div class="module-item">
                        <div class="module-title" onclick="toggleModule(this)">
                            <h3>Module 1: HTML Fundamentals</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="module-content">
                            <p>Learn the building blocks of WEB DEVELOPMENT with HTML5.</p>
                            <ul>
                                <li>HTML document structure</li>
                                <li>Semantic HTML elements</li>
                                <li>Forms and input types</li>
                                <li>Accessibility best practices</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="module-item">
                        <div class="module-title" onclick="toggleModule(this)">
                            <h3>Module 2: CSS Styling</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="module-content">
                            <p>Master the art of styling web pages with CSS3.</p>
                            <ul>
                                <li>CSS selectors and properties</li>
                                <li>Flexbox and Grid layouts</li>
                                <li>Responsive design principles</li>
                                <li>CSS animations and transitions</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="module-item">
                        <div class="module-title" onclick="toggleModule(this)">
                            <h3>Module 3: JavaScript Programming</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="module-content">
                            <p>Add interactivity to your websites with JavaScript.</p>
                            <ul>
                                <li>Variables, data types, and operators</li>
                                <li>Functions and control structures</li>
                                <li>DOM manipulation</li>
                                <li>Event handling</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="module-item">
                        <div class="module-title" onclick="toggleModule(this)">
                            <h3>Module 4: Modern Frameworks</h3>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="module-content">
                            <p>Explore popular frontend frameworks and libraries.</p>
                            <ul>
                                <li>Introduction to React.js</li>
                                <li>Vue.js fundamentals</li>
                                <li>Component-based architecture</li>
                                <li>State management</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Others Section -->
        <section id="others" class="others">
            <div class="container">
                <div class="section-title">
                    <h2>Community & More</h2>
                </div>
                <div class="others-content">
                    <div class="community-box">
                        <h3>Join Our Community</h3>
                        <p>Connect with like-minded learners, share projects, get feedback, and participate in exclusive events. Our community is the perfect place to grow your network and skills.</p>
                        <a href="/public/email.html" class="btn btn-primary" >Join Now</a>
                        
                        <div class="social-links">
                            <a href="https://www.instagram.com/brits_akademia/
" class="social-icon">
                               <i class="fa-brands fa-instagram"></i>
                            </a>
                            <a href="
https://github.com/BritsAcademy
" class="social-icon">
                                <i class="fab fa-github"></i>
                            </a>
                            <a href="http://www.linkedin.com/in/brits-academy-b4363336a" class="social-icon">
                                <i class="fab fa-linkedin-in"></i>
                            </a>
                            <a href="https://twitter.com/brits_academy" class="social-icon">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a href="https://www.tiktok.com/@britsacademy?is_from_webapp=1&sender_device=pc
" class="social-icon">
                                <i class="fa-brands fa-tiktok"></i>
                            </a>
                        </div>
                    </div>
                    
                    <div class="page-indicator">
                        <div class="page-dot active"></div>
                        <div class="page-dot"></div>
                        <div class="page-dot"></div>
                        <div class="page-dot"></div>
                    </div>
                </div>
            </div>
        </section>




        
        <!-- Admin Dashboard -->
   <!-- Admin Dashboard with improved table layout -->
<section id="admin-dashboard" class="admin-dashboard">
  <div class="container">
    <!-- Dashboard header -->
    <div class="dashboard-header">
      <!-- Header left -->
      <div>
        <h2 style="color: var(--accent); display: flex; align-items: center; gap: 10px;">
          <i class="fas fa-user-cog"></i> Admin Dashboard
        </h2>
        <p style="color: var(--light-text); margin-top: 5px;">
          Manage courses, students, and enrollments
        </p>
      </div>
      <!-- Header right buttons -->
      <div class="hero-btns">
        <a href="#" class="btn btn-secondary" onclick="showHome()">
          <i class="fas fa-home"></i> Back to Home
        </a>
        <button class="btn btn-primary" onclick="addMockStudents()">
          <i class="fas fa-plus"></i> Add Test Data
        </button>
        <button class="btn btn-danger" onclick="resetData()">
          <i class="fas fa-trash"></i> Reset Data
        </button>
      </div>
    </div>

    <!-- Stats -->
    <div class="stats-container" style="display: flex;margin: 60px;">
      <div class="stat-card">
        <div class="stat-value " id="total-students" style="margin: 10px;">0</div>
        <div class="stat-label">Total Students</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="active-courses" style="margin: 10px">4</div>
        <div class="stat-label"style="margin: 10px">Active Courses</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="completion-rate" style="margin: 10px">0%</div>
        <div class="stat-label" style="margin: 10px">Avg Completion </div>
      </div>
      <!-- <div class="stat-card" style="margin: 10px"> -->
        <!-- <div class="stat-value" id="paid-rate" style="margin: 10px">0%</div> -->
        <!-- <div class="stat-label">Paid Enrollments</div> -->
      <!-- </div> -->
    </div>

    <!-- Courses Section -->
    <h3 class="section-heading">
      <i class="fas fa-book"></i> Course Management
    </h3>
            <div class="course-cards">
                <div class="admin-course-card" onclick="showStudents('web-dev')">
                    <div class="course-icon">
                        <i class="fas fa-code"></i>
                    </div>
                    <h3>WEB DEVELOPMENT</h3>
                    <p><i class="fas fa-users"></i> <span id="web-dev-students">Students: 0</span></p>
                    <p><i class="fas fa-chart-line"></i> Completion Rate: <span id="web-dev-rate">0%</span></p>
                </div>
                
                <div class="admin-course-card" onclick="showStudents('data-science')">
                    <div class="course-icon">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <h3>Data Science</h3>
                    <p><i class="fas fa-users"></i> <span id="data-science-students">Students: 0</span></p>
                    <p><i class="fas fa-chart-line"></i> Completion Rate: <span id="data-science-rate">0%</span></p>
                </div>
                
                <div class="admin-course-card" onclick="showStudents('cybersecurity')">
                    <div class="course-icon" >
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>Cybersecurity</h3>
                    <p><i class="fas fa-users"></i> <span id="cybersecurity-students">Students: 0</span></p>
                    <p><i class="fas fa-chart-line"></i> Completion Rate: <span id="cybersecurity-rate">0%</span></p>
                </div>
                
                <div class="admin-course-card" onclick="showStudents('graphics-design')">
                    <div class="course-icon">
                        <i class="fas fa-paint-brush"></i>
                    </div>
                    <h3>GRAPHICS DESIGN</h3>
                    <p><i class="fas fa-users"></i> <span id="graphics-design-students">Students: 0</span></p>
                    <p><i class="fas fa-chart-line"></i> Completion Rate: <span id="graphics-design-rate">0%</span></p>
                </div>
            </div>
            
            <!-- Search bar -->
    <div class="search-container">
      <input type="text" id="search-input" class="search-box" placeholder="Search students by name, email, or phone..." oninput="filterStudents()">
      <button class="btn btn-primary" onclick="showStudents(currentCourse)">
        <i class="fas fa-sync-alt"></i> Refresh
      </button>
    </div>

    <!-- Student list -->
    <h3 id="student-list-title" class="section-heading">
      <i class="fas fa-user-graduate"></i> <span>WEB DEVELOPMENT Students</span>
    </h3>
    <div class="table-container">
      <table class="students-table">
        <thead>
          <tr>
            <th>Student Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Enrollment Date</th>
            <th>Payment </th>
            <th>Schedule</th>
            <th>Status</th>
            <th style="min-width: 130px;">Actions</th>
          </tr>
        </thead>
        <tbody id="students-list">
          <tr>
            <td colspan="8" class="no-students">
              <i class="fas fa-user-graduate" style="font-size: 3rem; margin-bottom: 15px;"></i>
              <h3>No students found</h3>
              <p>Add students using the "Add Test Data" button</p>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>
        <!-- Notification Section -->
        <section id="notification-section" class="notification-section">
            <div class="container">
                <div class="notification-content">
                    <h2>Latest Updates</h2>
                    <p>Stay tuned for our upcoming courses and events!</p>
                </div>
            </div>
        </section>
    
    <div id="notification" class="notification">
        <i class="fas fa-check-circle"></i>
        <span>Data loaded successfully!</span>
    </div>
    
    <div id="notification" class="notification">
        Data loaded successfully!
    </div>

    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h4>BRITS ACADEMY</h4>
                    <p>Empowering individuals with technical skills for the digital future through high-quality, accessible education.</p>
                </div>
                
                <div class="footer-column">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="#" onclick="showHome()">Home</a></li>
                        <li><a href="#" onclick="showAbout()">About Us</a></li>
                        <li><a href="#" onclick="showCourses()">Courses</a></li>
                        <li><a href="#" onclick="showAdmin()">Admin</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h4>Categories</h4>
                    <ul>
                        <li><a href="#" onclick="showCourseDetail('web-dev')">WEB DEVELOPMENT</a></li>
                        <li><a href="#" onclick="showCourseDetail('data-science')">Data Science</a></li>
                        <li><a href="#" onclick="showCourseDetail('cybersecurity')">Cybersecurity</a></li>
                        <li><a href="#" onclick="showCourseDetail('cloud-computing')">GRAPHICS DESIGN</a></li>
                        <li><a href="#" onclick="showCourseDetail('mobile-dev')">YOUTUBE, TIKTOK MONETIZATION& SOCIAL MEDIA MANAGEMENT</a></li>
                    </ul>
                </div>
                
                <div class="footer-column">
                    <h4>Contact Us</h4>
                    <ul>
                        <li><i class="fas fa-envelope"></i> academybrits@gmail.com</li>
                        <li><i class="fas fa-phone"></i> +254 (705) 907-913</li>
                        <li><i class="fas fa-map-marker-alt"></i> Kutus, Kerugoya</li>
                    </ul>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2025 BRITS ACADEMY. All rights reserved.</p>
            </div>
        </div>
    </footer>

  <!-- Registration Modal  -->
    <div id="registration-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Student Registration</h3>
                <button class="close-modal" onclick="closeModal('registration-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="registration-form" method="post">
                    <div class="form-row">
                        <div class="form-group floating-label">
                            <input type="text" id="first-name" class="form-control" placeholder=" " required>
                            <label for="first-name">First Name</label>
                        </div>
                        <div class="form-group floating-label">
                            <input type="text" id="middle-name" class="form-control" placeholder=" ">
                            <label for="middle-name">Middle Name (Optional)</label>
                        </div>
                    </div>
                    
                    <div class="form-group floating-label">
                        <input type="text" id="last-name" class="form-control" placeholder=" " required>
                        <label for="last-name">Last Name</label>
                    </div>
                    
                    <div class="form-group floating-label">
                        <input type="email" id="email" class="form-control" placeholder=" " required>
                        <label for="email">Email Address</label>
                    </div>
                    
                    <div class="form-group floating-label">
                        <input type="tel" id="phone" class="form-control" placeholder=" " required>
                        <label for="phone">Phone Number</label>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="course">Select Course</label>
                            <select id="course" class="form-control" required>
                                <option value="" disabled selected>Choose a course</option>
                                <option value="web-dev">WEB DEVELOPMENT</option>
                                <option value="data-science">Data Science</option>
                                <option value="cybersecurity">Cybersecurity</option>
                                <option value="graphics-design">GRAPHICS DESIGN</option>
                                <option value="social-media">Social Media Management</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="level">Course Level</label>
                            <select id="level" class="form-control" required>
                                <option value="" disabled selected>Select level</option>
                                <option value="beginner">Beginner</option>
                                <option value="intermediate">Intermediate</option>
                                <option value="advanced">Advanced</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <input type="checkbox" id="terms" required>
                        <label for="terms">I agree to Brits Academy's Terms and Conditions</label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('registration-modal')">Cancel</button>
                <button class="btn btn-primary" onclick="validateAndProceed()">
                <span class="btn-text">Proceed to Payment</span>
                    <span class="btn-loading" style="display:none;">
                        <i class="fas fa-spinner fa-spin"></i> Sending...
                    </span>
                </button>
            </div>
        </div>
    </div>


     <!-- <iframe src="https://app.edcafe.ai/chatbots/68568d1410c6ad0621d6faf7" title=Brits Academy Chatbot width="100%" height="100%" style="border: none;"></iframe> -->
       <script>
        // Initialize EmailJS
        (function() {
            emailjs.init("uO6yLWKAtkCxMCgUM")
                .then(() => {
                    document.getElementById('emailjsStatus').innerHTML = 
                        '<i class="fas fa-check-circle"></i> <span>EmailJS Ready!</span>';
                    document.getElementById('emailjsStatus').classList.add('success');
                    
                    // Remove status after 3 seconds
                    setTimeout(() => {
                        document.getElementById('emailjsStatus').classList.add('fade-out');
                        setTimeout(() => {
                            document.getElementById('emailjsStatus').remove();
                        }, 500);
                    }, 3000);
                })
                .catch(error => {
                    document.getElementById('emailjsStatus').innerHTML = 
                        '<i class="fas fa-exclamation-triangle"></i> <span>EmailJS Failed: ' + error + '</span>';
                    document.getElementById('emailjsStatus').classList.add('error');
                });
        })();

        // Modal functions
        function openRegistration() {
            document.getElementById('registration-modal').style.display = 'flex';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.getElementById('registration-form').reset();
        }
        
        // Form validation
        function validatePhone(phone) {
            const phoneRegex = /^[0-9\-\+]{9,15}$/;
            return phoneRegex.test(phone);
        }
        
        function validateEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
        
        // Show notification
        function showNotification(message, type) {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : 'exclamation-circle'}"></i>
                <span>${message}</span>
            `;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('fade-out');
                setTimeout(() => notification.remove(), 500);
            }, 3000);
        }
        
        // Submit form with EmailJS
        function validateAndSubmit() {
            const form = document.getElementById('registration-form');
            const submitBtn = document.querySelector('.btn-primary');
            const btnText = submitBtn.querySelector('.btn-text');
            const btnLoading = submitBtn.querySelector('.btn-loading');
            
            // Basic validation
            if (!form.checkValidity()) {
                showNotification('Please fill in all required fields', 'error');
                return;
            }
            
            // Validate email
            const email = document.getElementById('email').value;
            if (!validateEmail(email)) {
                showNotification('Please enter a valid email address', 'error');
                document.getElementById('email').focus();
                return;
            }
            
            // Validate phone
            const phone = document.getElementById('phone').value;
            if (!validatePhone(phone)) {
                showNotification('Please enter a valid phone number', 'error');
                document.getElementById('phone').focus();
                return;
            }
            
            // Show loading state
            btnText.style.display = 'none';
            btnLoading.style.display = 'inline-block';
            
            // Collect form data
            const formData = {
                first_name: document.getElementById('first-name').value,
                middle_name: document.getElementById('middle-name').value || 'N/A',
                last_name: document.getElementById('last-name').value,
                email: email,
                phone: phone,
                course: document.getElementById('course').options[document.getElementById('course').selectedIndex].text,
                level: document.getElementById('level').options[document.getElementById('level').selectedIndex].text,
                registration_date: new Date().toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                })
            };
            
            // Send email using EmailJS
            emailjs.send('service_7b1ee5s', 'template_t34d75g', formData)
                .then(function(response) {
                    console.log('SUCCESS!', response.status, response.text);
                    
                    // Hide loading state
                    btnText.style.display = 'inline-block';
                    btnLoading.style.display = 'none';
                    
                    // Show success message
                    showNotification('Student registration submitted successfully!', 'success');
                    
                    // Update student count
                    const studentCount = document.getElementById('total-students');
                    studentCount.textContent = parseInt(studentCount.textContent) + 1;
                    
                    // Reset form after 2 seconds
                    setTimeout(() => {
                        form.reset();
                        closeModal('registration-modal');
                    }, 2000);
                }, function(error) {
                    console.log('FAILED...', error);
                    
                    // Hide loading state
                    btnText.style.display = 'inline-block';
                    btnLoading.style.display = 'none';
                    
                    // Show error message
                    showNotification('Failed to send registration: ' + error.text, 'error');
                });
        }
        
        // Initialize student count
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('total-students').textContent = '42';
        });
    </script>
    <script>
        // ===== KNOWLEDGE BASE ===== //
        const academyFAQs = [
            {
                "question": "How do I enroll in a course?",
                "answer": "Yes, there is a registration fee, the information regarding payment methods and registration fees is present in the 'enroll now' button. You can also contact us at +254741261579 for more information."
            },
            {
                "question": "What payment methods do you accept?",
                "answer": "We accept M-Pesa (Till Number: 3650078), Direct Money Transfer through (Brits Academy official hotline, Number:+254741261579 ), and cash payments at our office."
            },
            {
                "question": "Do you offer certificates upon completion?",
                "answer": "Yes, all courses include a Brits Academy certificate upon successful completion and passing the final assessment."
            },
            {
                "question": "Can I take multiple courses at the same time?",
                "answer": "We offer 6 courses of which you can view. Just write 'tutor' in the chat and you'll be redirected to the courses page. You can enroll in multiple courses, but we recommend not exceeding 2-3 at a time to ensure quality learning."
            },
            {
                "question": "What if I miss a class?",
                "answer": "Recorded sessions are available for all classes. You can access them through our student portal. If you need additional help, you can schedule a 1-on-1 session with your tutor."
            },
            {
                "question": "Do you offer job placement assistance?",
                "answer": "Yes, we have a career services department that helps with resume building, interview preparation, and connecting students with our industry partners."
            },
            {
                "question": "What equipment do I need for online classes?",
                "answer": "You'll need a computer/laptop with internet access, a webcam, and a microphone. Specific software requirements vary by course."
            },
            {
                "question": "Are there any discounts available?",
                "answer": "We offer early bird discounts (10% off for enrollment 30+ days before start), group discounts (15% off for 3+ students), and alumni discounts (20% off for returning students)."
            },
            {
                "question": "Can I get a refund if I'm not satisfied?",
                "answer": "We offer a 7-day money-back guarantee after the first class. After that, refunds are prorated based on classes attended."
            },
            {
                "question": "How qualified are your tutors?",
                "answer": "All our tutors have at least 5 years of industry experience and undergo rigorous training. Many hold advanced degrees in their respective fields."
            },
            {
                "question": "Do you offer payment plans?",
                "answer": "Yes, we offer flexible payment plans. You can pay 50% at enrollment and the remainder in monthly installments with no interest."
            },
            {
                "question": "What is the class size?",
                "answer": "We maintain small class sizes of 10-15 students to ensure personalized attention and effective learning."
            },
            {
                "question": "Do I need prior experience for beginner courses?",
                "answer": "No, our beginner courses are designed for students with no prior experience. We start from the fundamentals and build up."
            },
            {
                "question": "How long do I have access to course materials?",
                "answer": "You'll have lifetime access to all course materials, including recordings, through our student portal."
            },
            {
                "question": "Can I switch courses after enrollment?",
                "answer": "You can enroll using the main academy landing page by clicking the  'Enroll now' button and you'll be redirected to payment page or you can contact +254741261579 for more info"
            }
        ];

        const academyCourses = [
            {
                "id": "1",
                "name": "Web Development",
                "tutor": "Ian Njoroge",
                "tutorPhone": "+254741261579",
                "description": "Full stack web development course covering HTML, CSS, JavaScript, React, Node.js, and MongoDB. Learn to build complete web applications from front-end to back-end.",
                "duration": "3 months",
                "schedule": "Mon & Wed, 2PM-4PM",
                "prerequisites": "Basic computer skills",
                "certification": "Brits Academy Web Developer Certificate",
                "fee": "KES 25,000"
            },
            {
                "id": "2",
                "name": "Data Science",
                "tutor": "Victor",
                "tutorPhone": "+254704230381",
                "description": "Master data analysis, visualization, and machine learning using Python, Pandas, NumPy, and Scikit-learn. Learn to extract insights from complex datasets.",
                "duration": "4 months",
                "schedule": "Tue & Thu, 10AM-12PM",
                "prerequisites": "Basic math knowledge",
                "certification": "Brits Academy Data Science Certificate",
                "fee": "KES 30,000"
            },
            {
                "id": "3",
                "name": "Cybersecurity",
                "tutor": "Excel",
                "tutorPhone": "+254117487554",
                "description": "Learn cybersecurity fundamentals including network security, ethical hacking, penetration testing, cryptography, and security best practices.",
                "duration": "3 months",
                "schedule": "Mon & Fri, 4PM-6PM",
                "prerequisites": "Basic networking knowledge",
                "certification": "Brits Academy Cybersecurity Certificate",
                "fee": "KES 28,000"
            },
            {
                "id": "4",
                "name": "Graphics Design & Architecture",
                "tutor": "Iann Abungana",
                "tutorPhone": "+254759097157",
                "description": "Master design principles, architectural concepts, and industry tools like AutoCAD, SketchUp, and Adobe Creative Suite for architectural visualization.",
                "duration": "4 months",
                "schedule": "Wed & Sat, 9AM-12PM",
                "prerequisites": "Creativity and design interest",
                "certification": "Brits Academy Design & Architecture Certificate",
                "fee": "KES 27,000"
            },
            {
                "id": "5",
                "name": "YouTube, TikTok Monetization & Social Media Management",
                "tutor": "Telvin",
                "tutorPhone": "+254746550166",
                "description": "Learn content creation strategies, audience growth techniques, monetization methods, and social media management across all major platforms.",
                "duration": "2 months",
                "schedule": "Tue & Thu, 2PM-4PM",
                "prerequisites": "Social media account",
                "certification": "Brits Academy Social Media Expert Certificate",
                "fee": "KES 20,000"
            },
            {
                "id": "6",
                "name": "Virtual Assistant, Digital Marketing & Chat Moderation",
                "tutor": "Caleb",
                "tutorPhone": "+254791870469",
                "description": "Master virtual assistance skills including email management, digital marketing strategies, chat moderation, customer support, and productivity tools.",
                "duration": "3 months",
                "schedule": "Mon, Wed, Fri 6PM-8PM",
                "prerequisites": "Good communication skills",
                "certification": "Brits Academy Virtual Professional Certificate",
                "fee": "KES 22,000"
            }
        ];

        const academyHandbook = {
            "officeHours": "Monday-Friday: 8:00 AM - 6:00 PM\nSaturday: 9:00 AM - 1:00 PM\nSunday: Closed",
            "contactInfo": "Phone: +254741261579\nEmail: academybrits@gmail.com\nLocation: Nairobi CBD, Kenya",
            "academicCalendar": "Term 1: January 9 - March 31\nTerm 2: April 10 - June 30\nTerm 3: July 10 - September 29\nTerm 4: October 9 - December 15",
            "paymentMethods": "1. M-Pesa: Paybill 123456 â€¢ Account: Your Full Name\n2. Bank Transfer: Equity Bank â€¢ Account Name: Brits Academy â€¢ Account #: 123456789\n3. Cash: At our office during business hours",
            "latePaymentPolicy": "A 5% monthly penalty will be applied to balances overdue by more than 7 days.",
            "certificationRequirements": "1. Attend at least 80% of classes\n2. Complete all assignments\n3. Score at least 60% on final assessment\n4. Settle all financial obligations",
            "supportServices": "Technical Support: support@britsacademy.ac.ke (8AM-8PM daily)\nAcademic Support: Weekly tutor office hours, Study groups\nCounseling Services: Confidential counseling available"
        };

        // ===== ENHANCED CHATBOT FUNCTIONALITY ===== //
        document.addEventListener('DOMContentLoaded', function() {
            // DOM elements
            const academyChatLauncher = document.getElementById('academyChatLauncher');
            const academyChatContainer = document.getElementById('academyChatContainer');
            const academyChatClose = document.getElementById('academyChatClose');
            const academyChatMessages = document.getElementById('academyChatMessages');
            const academyChatQuery = document.getElementById('academyChatQuery');
            const academyChatSendBtn = document.getElementById('academyChatSendBtn');
            
            // Chat state management
            let academyChatState = 'initial'; // 'initial', 'awaiting_tutor_selection', 'awaiting_contact_confirmation'
            let academySelectedTutor = null;
            let lastUserMessage = '';
            
            // Toggle chatbot visibility
            academyChatLauncher.addEventListener('click', function() {
                academyChatContainer.classList.add('active');
                // Reset state when chat is opened
                academyChatState = 'initial';
                // Add welcome message if chat is empty
                if (academyChatMessages.children.length === 0) {
                    setTimeout(() => {
                        academyAddBotMessage("<div class='academy-greeting'><strong>Hello! ðŸ‘‹</strong><br>Welcome to Brits Academy. I'm your virtual assistant. How can I help you today?</div>");
                        // Show quick start options
                        academyShowQuickStartOptions();
                    }, 300);
                }
            });
            
            academyChatClose.addEventListener('click', function() {
                academyChatContainer.classList.remove('active');
            });
            
            // Send message
            academyChatSendBtn.addEventListener('click', academySendUserMessage);
            academyChatQuery.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') academySendUserMessage();
            });
            

            
            // Quick replies and tutor options event delegation
            academyChatMessages.addEventListener('click', function(e) {
                if (e.target.classList.contains('academy-quick-reply-btn')) {
                    const query = e.target.getAttribute('data-academy-query');
                    academyChatQuery.value = query;
                    academySendUserMessage();
                }
                
                // WhatsApp button handling
                if (e.target.classList.contains('academy-whatsapp-btn')) {
                    const phone = e.target.getAttribute('data-academy-phone');
                    academyOpenWhatsApp(phone);
                }
                
                // Tutor option handling
                if (e.target.classList.contains('academy-tutor-option')) {
                    const tutorPhone = e.target.getAttribute('data-tutor-phone');
                    const tutorName = e.target.getAttribute('data-tutor-name');
                    const courseName = e.target.getAttribute('data-course-name');
                    
                    // Set state and tutor info
                    academyChatState = 'awaiting_contact_confirmation';
                    academySelectedTutor = {
                        name: tutorName,
                        phone: tutorPhone,
                        course: courseName
                    };
                    
                    // Show confirmation message
                    academyAddBotMessage(`Would you like to contact ${tutorName} (${courseName} tutor) via WhatsApp at ${tutorPhone}?`);
                }
                
                // Prediction item handling
                if (e.target.classList.contains('academy-prediction-item')) {
                    const query = e.target.getAttribute('data-prediction');
                    academyChatQuery.value = query;
                    academySendUserMessage();
                }
            });
            
            // Send user message
            function academySendUserMessage() {
                const query = academyChatQuery.value.trim();
                if (!query) return;
                
                academyAddUserMessage(query);
                academyChatQuery.value = '';
                lastUserMessage = query;
                
                // Show typing indicator
                academyShowTypingIndicator();
                
                // Get bot response after a short delay
                setTimeout(function() {
                    academyRemoveTypingIndicator();
                    const response = academyGetBotResponse(query);
                    academyAddBotMessage(response);
                }, 800);
            }
            
            // Add user message to chat
            function academyAddUserMessage(text) {
                const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                const messageDiv = document.createElement('div');
                messageDiv.className = 'academy-msg academy-user-msg';
                messageDiv.innerHTML = `
                    <div>${text}</div>
                    <span class="academy-msg-time">${time}</span>
                `;
                academyChatMessages.appendChild(messageDiv);
                academyScrollToBottom();
            }
            
            // Add bot message to chat
            function academyAddBotMessage(text) {
                const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                const messageDiv = document.createElement('div');
                messageDiv.className = 'academy-msg academy-bot-msg';
                
                // Check if we need to add quick replies
                let quickReplies = '';
                
                if (text.includes('Which course')) {
                    quickReplies = `
                        <div class="academy-quick-replies">
                            ${academyCourses.slice(0, 4).map(course => 
                                `<button class="academy-quick-reply-btn" data-academy-query="${course.name}">${course.name}</button>`
                            ).join('')}
                        </div>
                    `;
                }
                else if (text.includes('Would you like to contact a specific tutor?')) {
                    quickReplies = `
                        <div class="academy-tutor-options">
                            ${academyCourses.map(course => 
                                `<div class="academy-tutor-option" 
                                    data-tutor-phone="${course.tutorPhone}"
                                    data-tutor-name="${course.tutor}"
                                    data-course-name="${course.name}">
                                    <div class="academy-tutor-name">${course.tutor}</div>
                                    <div class="academy-tutor-course">${course.name}</div>
                                </div>`
                            ).join('')}
                        </div>
                    `;
                }
                else if (text.includes('Would you like to contact')) {
                    quickReplies = `
                        <div class="academy-quick-replies">
                            <button class="academy-quick-reply-btn" data-academy-query="Yes">Yes</button>
                            <button class="academy-quick-reply-btn" data-academy-query="No">No</button>
                        </div>
                    `;
                }
                else if (text.includes('Click here to message')) {
                    // Add WhatsApp button directly in the message
                    quickReplies = `
                        <div class="academy-quick-replies">
                            <a href="https://wa.me/${academyCleanPhone(academySelectedTutor.phone)}" class="academy-whatsapp-btn" target="_blank">
                                <i class="fab fa-whatsapp"></i> Message on WhatsApp
                            </a>
                        </div>
                    `;
                }
                
                // Add prediction section if applicable
                let prediction = '';
                if (academyChatState === 'initial' && !text.includes('Would you like to contact') && 
                    !text.includes('Click here to message') && !text.includes('Which course')) {
                    prediction = academyGeneratePrediction(lastUserMessage);
                }
                
                messageDiv.innerHTML = `
                    <div>${text}</div>
                    ${quickReplies}
                    ${prediction}
                    <span class="academy-msg-time">${time}</span>
                `;
                
                academyChatMessages.appendChild(messageDiv);
                academyScrollToBottom();
            }
            
            // // Generate prediction based on last user message
            function academyGeneratePrediction(lastMessage) {
                const lowerMessage = lastMessage.toLowerCase();
                let predictions = [];
                
                // Course-related predictions
                if (lowerMessage.includes('course') || 
                    lowerMessage.includes('program') || 
                    lowerMessage.includes('class')) {
                    
                    // predictions = [
                    //     "What are the prerequisites for this course?",
                    //     "How much does this course cost?",
                    //     "Who is the tutor for this course?",
                    //     "What is the schedule for this course?"
                    // ];
                }
                // Payment-related predictions
                else if (lowerMessage.includes('payment') || 
                         lowerMessage.includes('fee') || 
                         lowerMessage.includes('cost') || 
                         lowerMessage.includes('price')) {
                    
                    predictions = [
                        "Do you offer payment plans?",
                        "Are there any discounts available?",
                        "What payment methods do you accept?",
                        "Is there a registration fee?"
                    ];
                }
                // Tutor-related predictions
                else if (lowerMessage.includes('tutor') || 
                         lowerMessage.includes('instructor') || 
                         lowerMessage.includes('teacher')) {
                    
                    predictions = [
                        "Can I contact the tutor directly?",
                        "What are the tutor's qualifications?",
                        "Does the tutor offer private sessions?",
                        "How experienced is the tutor?"
                    ];
                }
                // Enrollment-related predictions
                else if (lowerMessage.includes('enroll') || 
                         lowerMessage.includes('register') || 
                         lowerMessage.includes('sign up')) {
                    
                    // predictions = [
                    //     "What documents do I need for enrollment?",
                    //     "Can I enroll online?",
                    //     "Is there an enrollment deadline?",
                    //     "What is the enrollment process?"
                    // ];
                }
                
                // If we have predictions, show them
                if (predictions.length > 0) {
                    return `
                        <div class="academy-prediction-badge">
                            <strong>You might want to ask:</strong>
                            ${predictions.map(p => 
                                `<div class="academy-prediction-item" data-prediction="${p}">${p}</div>`
                            ).join('')}
                        </div>
                    `;
                }
                
                return '';
            }
            
            // Show quick start options
            function academyShowQuickStartOptions() {
                const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                const messageDiv = document.createElement('div');
                messageDiv.className = 'academy-msg academy-bot-msg';
                
                messageDiv.innerHTML = `
                    <div>You can quickly ask about:</div>
                    <div class="academy-quick-replies">
                        <button class="academy-quick-reply-btn" data-academy-query="Courses">Available Courses</button>
                        <button class="academy-quick-reply-btn" data-academy-query="Enrollment">Enrollment Process</button>
                        <button class="academy-quick-reply-btn" data-academy-query="Fees">Course Fees</button>
                        <button class="academy-quick-reply-btn" data-academy-query="Tutors">Tutor Information</button>
                    </div>
                    <span class="academy-msg-time">${time}</span>
                `;
                
                academyChatMessages.appendChild(messageDiv);
                academyScrollToBottom();
            }
            
            // Show typing indicator
            function academyShowTypingIndicator() {
                const typingDiv = document.createElement('div');
                typingDiv.className = 'academy-bot-msg';
                typingDiv.id = 'academyTypingIndicator';
                typingDiv.innerHTML = `
                    <div class="academy-typing-indicator">
                        <div class="academy-typing-dot"></div>
                        <div class="academy-typing-dot"></div>
                        <div class="academy-typing-dot"></div>
                    </div>
                `;
                academyChatMessages.appendChild(typingDiv);
                academyScrollToBottom();
            }
            
            // Remove typing indicator
            function academyRemoveTypingIndicator() {
                const typingIndicator = document.getElementById('academyTypingIndicator');
                if (typingIndicator) {
                    typingIndicator.remove();
                }
            }
            
            // Get bot response based on user query
            function academyGetBotResponse(query) {
                const lowerQuery = query.toLowerCase();
                
                // 1. State-based responses (highest priority)
                if (academyChatState === 'awaiting_contact_confirmation') {
                    if (academyMatchPositive(lowerQuery)) {
                        academyChatState = 'initial';
                        return `Great! <a href="https://wa.me/${academyCleanPhone(academySelectedTutor.phone)}" 
                                class="academy-whatsapp-btn" target="_blank">
                                Click here to message ${academySelectedTutor.name} on WhatsApp
                            </a>`;
                    } else {
                        academyChatState = 'initial';
                        return 'How else can I help you?';
                    }
                }
                else if (academyChatState === 'awaiting_tutor_selection') {
                    const tutorMatch = academyCourses.find(course => 
                        course.tutor.toLowerCase().includes(lowerQuery) || 
                        course.name.toLowerCase().includes(lowerQuery)
                    );
                    
                    if (tutorMatch) {
                        academyChatState = 'awaiting_contact_confirmation';
                        academySelectedTutor = {
                            name: tutorMatch.tutor,
                            phone: tutorMatch.tutorPhone,
                            course: tutorMatch.name
                        };
                        return `Would you like to contact ${tutorMatch.tutor} (${tutorMatch.name} tutor) via WhatsApp at ${tutorMatch.tutorPhone}?`;
                    }
                    
                    return "I couldn't find that tutor. Would you like to try again?";
                }
                
// // Add this JavaScript to handle auto-scrolling
// document.addEventListener('DOMContentLoaded', function() {
//     const chatMessages = document.getElementById('academyChatMessages');
    
//     function scrollToBottom() {
//         chatMessages.scrollTop = chatMessages.scrollHeight;
//     }
    
//     // Auto-scroll when new messages are added
//     const observer = new MutationObserver(scrollToBottom);
//     observer.observe(chatMessages, { childList: true });
    
//     // Also scroll to bottom initially
//     scrollToBottom();
    
//     // Your existing chat launcher and close functionality...
//     document.getElementById('academyChatLauncher').addEventListener('click', function() {
//         document.getElementById('academyChatContainer').classList.add('active');
//     });
    
//     document.getElementById('academyChatClose').addEventListener('click', function() {
//         document.getElementById('academyChatContainer').classList.remove('active');
//     });
// });

                // 2. Course-specific questions
                const courseMatch = academyMatchCourse(lowerQuery);
                if (courseMatch) {
                    return academyFormatCourseResponse(courseMatch);
                }
                
                // 3. Tutor contact request
                if (academyMatchTutorRequest(lowerQuery)) {
                    academyChatState = 'awaiting_tutor_selection';
                    return 'Would you like to contact a specific tutor? Here are our course tutors:';
                }
                
                // 4. Greeting responses
                if (academyMatchGreeting(lowerQuery)) {
                    return "Welcome back! How can I assist you today? You can ask about courses, enrollment, payments, or tutor contacts.";
                }
                
                // 5. FAQ matching
                const faqMatch = academyMatchFAQ(lowerQuery);
                if (faqMatch) return faqMatch;
                
                // 6. Ultimate fallback
                return "For this, you might want to contact '+254741261579' or email academybrits@gmail.com for more information. Thankyou";
            }
            
            // Match positive responses (yes, yeah, sure, etc.)
            function academyMatchPositive(query) {
                const positives = ["yes", "yeah", "yep", "sure", "ok", "okay", "definitely", "absolutely"];
                return positives.some(p => query.includes(p));
            }
            
            // Match tutor contact request
            function academyMatchTutorRequest(query) {
                const tutorKeywords = ["tutor", "instructor", "teacher", "lecturer", "contact tutor", "speak to teacher"];
                return tutorKeywords.some(k => query.includes(k));
            }
            
            // Match greetings
            function academyMatchGreeting(query) {
                const greetings = ["hi", "hello", "hey", "good morning", "good afternoon", "good evening"];
                return greetings.some(g => query.includes(g));
            }
            
            // Enhanced course matching
            function academyMatchCourse(query) {
                // First try direct name match
                let match = academyCourses.find(c => 
                    query.includes(c.name.toLowerCase()) || 
                    query.includes(c.tutor.toLowerCase().split(" ")[0])
                );
                
                if (!match) {
                    // Try keyword associations
                    const courseKeywords = {
                        "web": "Web Development",
                        "data": "Data Science",
                        "cyber": "Cybersecurity",
                        "graphic": "Graphics Design & Architecture",
                        "social": "YouTube, TikTok Monetization & Social Media Management",
                        "virtual": "Virtual Assistant, Digital Marketing & Chat Moderation"
                    };
                    
                    for (const [keyword, courseName] of Object.entries(courseKeywords)) {
                        if (query.includes(keyword)) {
                            match = academyCourses.find(c => c.name === courseName);
                            if (match) break;
                        }
                    }
                }
                
                return match;
            }
            
            // Enhanced FAQ matching
            function academyMatchFAQ(query) {
                // Normalize query: remove common stopwords
                const stopwords = ["the", "and", "how", "do", "what", "where", "when", "why"];
                const queryWords = query.split(/\W+/)
                    .filter(word => word.length > 2 && !stopwords.includes(word))
                    .map(word => word.toLowerCase());
                
                // Find FAQ with highest match score
                let bestMatch = null;
                let highestScore = 0;
                
                for (const faq of academyFAQs) {
                    const faqWords = faq.question.toLowerCase().split(/\W+/);
                    let score = 0;
                    
                    // Count matching root words
                    for (const qWord of queryWords) {
                        if (faqWords.some(fWord => fWord.startsWith(qWord) || qWord.startsWith(fWord))) {
                            score++;
                        }
                    }
                    
                    // Bonus for consecutive word matches
                    const queryPhrase = queryWords.join(" ");
                    if (faq.question.toLowerCase().includes(queryPhrase)) {
                        score += 2;
                    }
                    
                    if (score > highestScore) {
                        highestScore = score;
                        bestMatch = faq;
                    }
                }
                
                return highestScore >= 2 ? bestMatch.answer : null;
            }
            
            // Format course response
            function academyFormatCourseResponse(course) {
                return `
                    <div class="academy-course-badge">${course.name}</div>
                    <div class="academy-info-item"><strong>Description:</strong> ${course.description}</div>
                    <div class="academy-info-item"><strong>Duration:</strong> ${course.duration}</div>
                    <div class="academy-info-item"><strong>Schedule:</strong> ${course.schedule}</div>
                    <div class="academy-info-item"><strong>Fee:</strong> ${course.fee}</div>
                    <div class="academy-info-item"><strong>Tutor:</strong> ${course.tutor}</div>
                    <div class="academy-info-item"><strong>Prerequisites:</strong> ${course.prerequisites}</div>
                    <br>
                    Would you like to contact ${course.tutor} via WhatsApp at ${course.tutorPhone}?
                `;
            }
            
            // Open WhatsApp
            function academyOpenWhatsApp(phone) {
                const cleanPhone = academyCleanPhone(phone);
                window.open(`https://wa.me/${cleanPhone}`, '_blank');
            }
            
            // Clean phone number for WhatsApp link
            function academyCleanPhone(phone) {
                return phone.replace(/\D/g, '');
            }
            
            // Scroll to bottom of chat
            function academyScrollToBottom() {
                academyChatMessages.scrollTop = academyChatMessages.scrollHeight;
            }
        });
    </script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/firebaseui@6.0.2/dist/firebaseui.js"></script>
    <link type="text/css" rel="stylesheet" href="https://cdn.jsdelivr.net/npm/firebaseui@6.0.2/dist/firebaseui.css" />
    <!-- <script> // Firebase configuration
     const firebaseConfig = {
  apiKey: "AIzaSyAVfy2oy892QqkgPZ0wsYIe7vdyuu2VgiE",
  authDomain: "brits-academy.firebaseapp.com",
  projectId: "brits-academy",
  storageBucket: "brits-academy.firebasestorage.app",
  messagingSenderId: "449738730487",
  appId: "1:449738730487:web:b887df0a7470076a4cdcf2",
  measurementId: "G-7S02WLG1M3"
};
        // Add this temporary code to your registration form page
console.log("Firebase app:", firebase.app().name);
console.log("Firestore instance:", firebase.firestore().app.name);
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();
        const auth = firebase.auth();
        
        // // Initialize FirebaseUI
        // const uiConfig = {
        //     signInSuccessUrl: 'index.html',
        //     signInOptions: [
        //         firebase.auth.EmailAuthProvider.PROVIDER_ID,
        //         firebase.auth.GoogleAuthProvider.PROVIDER_ID
        //     ],
        //     tosUrl: '#',
        //     privacyPolicyUrl: '#',
        //     callbacks: {
        //         signInSuccessWithAuthResult: function(authResult, redirectUrl) {
        //             // User successfully signed in
        //             document.getElementById('firebaseui-auth-container').style.display = 'none';
        //             showAdminDashboard();
        //             return false;
        //         }
        //     }
        // };
        
        // const ui = new firebaseui.auth.AuthUI(auth);
        
        // Admin login function
        function showAdmin() {
            document.getElementById('firebaseui-auth-container').style.display = 'block';
            ui.start('#firebaseui-auth-container', uiConfig);
        }
        
        // Save student data to Firestore
        async function saveStudentToFirestore(formData) {
    try {
        console.log("Attempting to save to Firestore:", formData);
        
        const docRef = await firebase.firestore().collection("students").add({
            ...formData,
            registrationDate: firebase.firestore.FieldValue.serverTimestamp(),
            paymentStatus: "pending"
        });
        
        console.log("Successfully saved with ID:", docRef.id);
        return docRef.id;
    } catch (error) {
        console.error("Firestore save error:", error);
        throw error;
    }
}
        
        // Form Validation and Submission
        async function validateAndProceed() {
            const form = document.getElementById('registration-form');
            const submitBtn = form.querySelector('.btn-primary');
            const inputs = form.querySelectorAll('input[required], select[required]');
            let isValid = true;
            
            // Validate required fields
            inputs.forEach(input => {
                if (!input.value.trim()) {
                    input.style.borderColor = '#e74c3c';
                    isValid = false;
                    input.parentElement.style.animation = 'shake 0.5s';
                    setTimeout(() => input.parentElement.style.animation = '', 500);
                }
            });

            // Validate terms checkbox
            const terms = document.getElementById('terms');
            if (!terms.checked) {
                isValid = false;
                terms.parentElement.style.animation = 'shake 0.5s';
                setTimeout(() => terms.parentElement.style.animation = '', 500);
            }

            if (isValid) {
                submitBtn.classList.add('loading');
                
                // Collect form data
                const formData = {
                    firstName: document.getElementById('first-name').value.trim(),
                    lastName: document.getElementById('last-name').value.trim(),
                    middleName: document.getElementById('middle-name').value.trim(),
                    email: document.getElementById('email').value.trim(),
                    phone: document.getElementById('phone').value.trim(),
                    course: document.getElementById('course').value,
                    level: document.getElementById('level').value
                };

                // Calculate amount based on level
                const amountMap = { beginner: 10000, intermediate: 15000, advanced: 20000 };
                formData.amount = amountMap[formData.level] || 10000;

                try {
                    // Save to Firestore
                    const studentId = await saveStudentToFirestore(formData);
                    
                    // Generate receipt ID
                    const now = new Date();
                    const receiptId = `TS101-${now.getFullYear()}${(now.getMonth()+1).toString().padStart(2,'0')}${now.getDate().toString().padStart(2,'0')}-${Math.floor(Math.random()*1000).toString().padStart(3,'0')}`;
                    
                    // Update student record with receipt ID
                    await db.collection("students").doc(studentId).update({
                        receiptId: receiptId
                    });
                    
                    // Redirect to payment instructions
                    window.location.href = `payment-instructions.html?firstName=${encodeURIComponent(formData.firstName)}&course=${encodeURIComponent(formData.course)}&level=${encodeURIComponent(formData.level)}&amount=${formData.amount}&studentId=${studentId}`;
                } catch (error) {
                    console.error("Error saving student data:", error);
                    alert("There was an error processing your registration. Please try again.");
                    submitBtn.classList.remove('loading');
                }
            }
        }
        
        // Function to retrieve student data from Firestore
        async function getStudentData(studentId) {
            try {
                const doc = await db.collection("students").doc(studentId).get();
                if (doc.exists) {
                    return doc.data();
                } else {
                    console.log("No such document!");
                    return null;
                }
            } catch (error) {
                console.error("Error getting student data:", error);
                return null;
            }
        }
        </script> -->
    <script src="script.js"></script>
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
<script>
  (function() {
    emailjs.init("uO6yLWKAtkCxMCgUM"); // Your User ID (Public Key)
  })();
</script>

</body>
</html>